<div class="floating-particles">
  <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
  <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
  <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
  <div class="particle" style="left: 40%; animation-delay: 6s;"></div>
  <div class="particle" style="left: 50%; animation-delay: 8s;"></div>
  <div class="particle" style="left: 60%; animation-delay: 10s;"></div>
  <div class="particle" style="left: 70%; animation-delay: 12s;"></div>
  <div class="particle" style="left: 80%; animation-delay: 14s;"></div>
  <div class="particle" style="left: 90%; animation-delay: 16s;"></div>
</div>

<div class="matrix-rain" id="matrixRain"></div>

<div class="container scan-lines">
   <div class="app-header">
     <h1 class="neon-text-blue">{{ title }}</h1>
      <div class="header-controls">
      </div>
   </div>

   <app-content-manager
     *ngIf="showContentManager"
     (close)="showContentManager = false">
   </app-content-manager>



    <app-set-selection *ngIf="!qanda && !showContentManager" [availableRounds]="availableRounds" (setSelected)="selectSet($event)" (openContentManager)="showContentManager = true"></app-set-selection>

  <app-game-board *ngIf="qanda && !showContentManager" [categories]="qanda" (questionSelected)="onSelect($event)" (questionReset)="resetQuestion($event)"></app-game-board>

  <app-question-display *ngIf="selectedQuestion && !showContentManager" [question]="selectedQuestion" [canCancel]="couldBeCanceled" [players]="players" (close)="close()" (correct)="correct()" (incorrect)="incorrect()" (noOneKnows)="noOneKnows()"></app-question-display>

    <div class="players-container" *ngIf="qanda && !showContentManager">
      <div class="players-header">
        <h2 class="neon-text-purple">Players</h2>
      </div>
      <div class="players-content">
        <div class="players-row">
          <app-player-controls *ngFor="let player of players" [player]="player" [canRename]="true" [isActive]="false" [highlighted]="player.highlighted" (scoreAdjust)="adjustScore($event)"></app-player-controls>
        </div>
        <div class="player-count-controls">
          <button class="cyber-button count-btn" (click)="decreasePlayerCount()" [disabled]="playerCount <= 1" title="Remove Player">-</button>
          <button class="cyber-button count-btn" (click)="increasePlayerCount()" [disabled]="playerCount >= 8" title="Add Player">+</button>
        </div>
      </div>
    </div>
 </div>

  <div class="app-footer">
    <div class="footer-left">
      <button
        *ngIf="qanda"
        class="long-press-btn"
        (mousedown)="startLongPress('resetScores')"
        (mouseup)="endLongPress()"
        (mouseleave)="endLongPress()"
        title="Long press to reset scores">
        Reset Scores
      </button>
      <button
        *ngIf="qanda"
        class="long-press-btn"
        (mousedown)="startLongPress('resetRound')"
        (mouseup)="endLongPress()"
        (mouseleave)="endLongPress()"
        title="Long press to reset round">
        Reset Round
      </button>
    </div>
    <p *ngIf="currentRoundName && !showContentManager" class="center-text">Current Round: {{ currentRoundName }}</p>
    <div class="footer-controls">
      <span *ngIf="hasControllers" class="controller-indicator" title="Buzz controllers detected">ğŸ”´</span>
      <button
        *ngIf="qanda"
        class="cyber-button rounds-btn"
        (click)="backToRoundSelection()"
        title="Return to Round Selection">
        Select Round
      </button>
      <button class="cyber-button content-btn" (click)="showContentManager = !showContentManager" title="Content Manager">
        âš™ï¸
      </button>
    </div>
  </div>