<div class="floating-particles">
  <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
  <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
  <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
  <div class="particle" style="left: 40%; animation-delay: 6s;"></div>
  <div class="particle" style="left: 50%; animation-delay: 8s;"></div>
  <div class="particle" style="left: 60%; animation-delay: 10s;"></div>
  <div class="particle" style="left: 70%; animation-delay: 12s;"></div>
  <div class="particle" style="left: 80%; animation-delay: 14s;"></div>
  <div class="particle" style="left: 90%; animation-delay: 16s;"></div>
</div>

<div class="matrix-rain" id="matrixRain"></div>

<div class="container scan-lines">
   <div class="app-header">
     <h1 class="neon-text-blue">{{ title }}</h1>
      <div class="header-controls">
      </div>
   </div>

   <app-content-manager
     *ngIf="showContentManager"
     (close)="showContentManager = false">
   </app-content-manager>



    <app-set-selection *ngIf="!qanda && !showContentManager" [availableRounds]="availableRounds" (setSelected)="selectSet($event)" (openContentManager)="showContentManager = true"></app-set-selection>

  <app-game-board *ngIf="qanda && !showContentManager" [categories]="qanda" [players]="players" (questionSelected)="onSelect($event)" (questionReset)="resetQuestion($event)"></app-game-board>

   <app-question-display *ngIf="selectedQuestion && !showContentManager" [question]="selectedQuestion" [players]="players" [triggerReveal]="revealTrigger" (close)="close()" (correct)="correct()" (incorrect)="incorrect()" (noOneKnows)="noOneKnows()" (reveal)="reveal()"></app-question-display>

    <div class="players-container" *ngIf="qanda && !showContentManager">
      <div class="players-header">
        <h2 class="neon-text-purple">Players</h2>
      </div>
      <div class="players-content">
        <div class="players-row">
          <app-player-controls *ngFor="let player of players" [player]="player" [canRename]="true" [isActive]="false" [highlighted]="player.highlighted" [isCurrentSelector]="currentSelector?.id === player.id" (scoreAdjust)="adjustScore($event)" (renamingStateChange)="onPlayerRenamingStateChange($event)"></app-player-controls>
        </div>
        <div class="player-count-controls">
          <button class="cyber-button count-btn" (click)="decreasePlayerCount()" [disabled]="playerCount <= 1" title="Remove Player">-</button>
          <button class="cyber-button count-btn" (click)="increasePlayerCount()" [disabled]="playerCount >= 8" title="Add Player">+</button>
        </div>
      </div>
    </div>
 </div>

  <div class="app-footer">
    <div class="footer-left">
      <button
        *ngIf="qanda"
        class="long-press-btn"
        (mousedown)="startLongPress('resetScores')"
        (mouseup)="endLongPress()"
        (mouseleave)="endLongPress()"
        title="Long press to reset scores">
        Reset Scores
      </button>
      <button
        *ngIf="qanda"
        class="long-press-btn"
        (mousedown)="startLongPress('resetRound')"
        (mouseup)="endLongPress()"
        (mouseleave)="endLongPress()"
        title="Long press to reset round">
        Reset Round
      </button>
    </div>
    <div class="center-text">
      <p *ngIf="currentRoundName && !showContentManager && !selectedQuestion">Current Round: {{ currentRoundName }}</p>
      <div *ngIf="qanda && !showContentManager" class="keyboard-controls">
        <div *ngIf="!selectedQuestion" class="control-group">
          <kbd>1</kbd>-<kbd>8</kbd> Player Buzz ‚Ä¢ <kbd>C</kbd> Correct ‚Ä¢ <kbd>I</kbd> Incorrect ‚Ä¢ <kbd>R</kbd> Reveal ‚Ä¢ <kbd>Esc</kbd> Close ‚Ä¢ <kbd>N</kbd> No One Knows
        </div>
        <span *ngIf="!selectedQuestion" class="control-group-alt">
          <kbd>Shift</kbd>+<kbd>S</kbd> Reset Scores ‚Ä¢ <kbd>Shift</kbd>+<kbd>Q</kbd> Reset Round
        </span>
        <div *ngIf="selectedQuestion">
          <span class="control-group">
            <kbd>C</kbd> Correct ‚Ä¢ <kbd>I</kbd> Incorrect ‚Ä¢ <kbd>R</kbd> Reveal ‚Ä¢ <kbd>Esc</kbd> Close ‚Ä¢ <kbd>N</kbd> No One Knows
          </span>
        <span class="control-group-alt">
          <kbd>Shift</kbd>+<kbd>S</kbd> Reset Scores ‚Ä¢ <kbd>Shift</kbd>+<kbd>Q</kbd> Reset Round
        </span>
        </div>
      </div>
    </div>
    <div class="footer-controls">
      <span *ngIf="hasControllers" class="controller-indicator" title="Buzz controllers detected">üî¥</span>
      <button
        *ngIf="qanda"
        class="cyber-button rounds-btn"
        (click)="backToRoundSelection()"
        title="Return to Round Selection">
        Select Round
      </button>
      <button class="cyber-button content-btn" (click)="showContentManager = !showContentManager" title="Content Manager">
        ‚öôÔ∏è
      </button>
    </div>
  </div>